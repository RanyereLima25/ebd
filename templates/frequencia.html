<h2>Frequência da Aula</h2>

<h3>{{ aula.tema }}</h3>
<p>
    {{ aula.data.strftime('%d/%m/%Y') }} • {{ aula.trimestre }}
</p>

<form method="POST">

    <h4>Professor</h4>
    {% if professor %}
        <label>
            <input type="checkbox" name="presenca" value="prof_{{ professor.id }}"
            {% if professor_presente %}checked{% endif %}>
            {{ professor.nome }}
        </label>
        <br><br>
    {% else %}
        <p>Professor não definido</p>
    {% endif %}

    <h4>Alunos</h4>

    <button type="button" onclick="marcarTodos()">Marcar Todos</button>
    <button type="button" onclick="desmarcarTodos()">Desmarcar Todos</button>

    <br><br>

    {% for aluno in alunos %}
        <label>
            <input type="checkbox" name="presenca"
                   value="aluno_{{ aluno.id }}"
                   {% if aluno.id in alunos_presentes %}checked{% endif %}>
            {{ aluno.nome }}
        </label>
        <br>
    {% endfor %}

    <br>
    <button type="submit">Salvar</button>
</form>

<script>
function marcarTodos() {
    document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = true);
}

function desmarcarTodos() {
    document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
}
</script>

<h2>Frequência da Aula</h2>

<h3>{{ aula.tema }}</h3>
<p>
    {{ aula.data.strftime('%d/%m/%Y') }} • {{ aula.trimestre }}º Trimestre
</p>

<form method="POST">

    <!-- ================= PROFESSOR ================= -->
    <h4>Professor</h4>

    {% if professor %}
        <label>
            <input type="checkbox"
                   name="presenca"
                   value="{{ professor.id }}"
                   {% if professor.id in presentes_ids %}checked{% endif %}>
            {{ professor.nome }}
        </label>
        <br><br>
    {% else %}
        <p>Professor não definido</p>
    {% endif %}

    <!-- ================= ALUNOS ================= -->
    <h4>Alunos</h4>

    <button type="button" onclick="marcarTodos()">Marcar Todos</button>
    <button type="button" onclick="desmarcarTodos()">Desmarcar Todos</button>

    <br><br>

    {% for aluno in alunos %}
        <label>
            <input type="checkbox"
                   name="presenca"
                   value="{{ aluno.id }}"
                   {% if aluno.id in presentes_ids %}checked{% endif %}>
            {{ aluno.nome }}
        </label>
        <br>
    {% endfor %}

    <br>
    <button type="submit">Salvar</button>
</form>

<script>
function marcarTodos() {
    document.querySelectorAll('input[name="presenca"]').forEach(cb => cb.checked = true);
}

function desmarcarTodos() {
    document.querySelectorAll('input[name="presenca"]').forEach(cb => cb.checked = false);
}
</script>
